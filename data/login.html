<!DOCTYPE html>
<html charset="UTF-8">
    <head>
        <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1">
        <style> 
        input.tasto {
              font-size: 1em;
              letter-spacing: 1px;
              text-transform: uppercase;
              text-align: center;
              border: 2px solid rgba(0,0,200,0.6);
              background: lightgray;
              color: rgba(0,0,200,0.6);
              box-shadow: 1px 1px 2px rgba(0,0,250,0.4);
              border-radius: 10px;
              padding: 3px 10px;
              display: inline-block;
              cursor: pointer;
        }
        input.tasto:hover {
                color: green;
                box-shadow: 7px 7px 8px rgba(0,200,0,0.4);
            }

            h1 {
                letter-spacing: 1px;
                text-transform: uppercase;
                text-align: center;
                border: 2px solid rgba(0,0,200,0.6);
                background: lightgray;
                color: rgba(0,0,200,0.6);
                box-shadow: 1px 1px 2px rgba(0,0,200,0.4);
                border-radius: 10px;
                padding: 3px 10px;
                display: inline-block;
                cursor: default;
            }
                                                            
            header {                      
                background: linear-gradient(to right, #e1335c 0%,#73172f 100%);
                color: #ff0;
                padding:10px;
                text-align: center;
                vertical-align: middle; 
                font-size: 2em;
            }
            body{ 
                background: #e9e9e9;
                
                padding:15px;
                color: #48584f;
                font-family: Helvetica,Arial,sans-serif;
                font-variant: small-caps;
                font-size:1em;
                text-align: center;
            } 
            footer { 
                background: linear-gradient(to left, #e1335c 0%,#73172f 100%);
                padding:10px;
                text-align: right;
                vertical-align: bottom;
                color: #fff333;
            } 
  
        </style>
    </head>
    <body>
        <h1 class="ipAdress" id="idBouton" style="color: green;">%IP_ADRESS%</h1>
        <header>
            :: Temperature & Humidity in Taranto (Italy) ::
            
        </header><br>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/867219/charts/1?bgcolor=%23ffffff&amp;color=%23d62020&amp;dynamic=true&results=60&title=Temperatura&type=line&xaxis=Data">
            
        </iframe>
        <iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/867219/charts/2?bgcolor=%23ffffff&amp;color=%23d62020&amp;dynamic=true&results=60&title=Umidit%C3%A0&type=line&xaxis=Data">
            
        </iframe>
        <br>
        <br>
        <footer><div>by Mirabelli Angelo</div><div>---------</div></footer>
        <br>
        <br>
        <form action="setpage" method="get">
            <input type="submit" value="Setting" class="tasto">
        </form>
        
        
        
        <script>
             var uniqueURL = "/iprequest";
             var request = new XMLHttpRequest(); // http://www.toutjavascript.com/reference/ref-xmlhttprequest.php

             // la fonction à appeler lors d'un changement d'avancement de la requête AJAX
             request.onreadystatechange = function() {
                 console.log('test', uniqueURL);
                 if (this.readyState == 4) {
                     // Indicateur de l'avancement de l'appel AJAX == 4 => Données complètement accessibles
                     if (this.status == 200) {
                         // Code retour du serveur après l'appel AJAX == 200 => OK, tout s'est bien passé
                         if (this.responseText != null) {
                             // si on a bien obtenu une réponse non nulle
                             // alors on remplace le noeud par la réponse
                             document.getElementById("idBouton").innerHTML = this.responseText;
                             
                         }
                     }
                 }
             }
             request.open("POST", uniqueURL , false); // ici on envoie la requête GET sur l'URL /reqEtatBouton
             request.send();
            
            
        </script>
        
    </body>
</html>